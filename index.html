<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Astyyyy's Private message system</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      transition: background 0.4s ease, color 0.4s ease;
    }
    body.dark {
      background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%);
      color: #e2e8f0;
    }
    body.light {
      background: linear-gradient(135deg, #e6f2ff 0%, #cce5ff 100%);
      color: #1e293b;
    }
    .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
    .card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      box-shadow: 0 6px 28px rgba(0, 0, 0, 0.1);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    .card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 4px;
      background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899);
    }
    body.dark .card {
      background: rgba(15, 23, 42, 0.95);
      box-shadow: 0 6px 28px rgba(0, 0, 0, 0.3);
    }
    .card:hover { transform: translateY(-8px); box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15); }
    .message-item { transition: all 0.3s ease; }
    .message-item:hover { scale: 1.02; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
    .fixed-message { border-left: 6px solid #fbbf24; background: rgba(251, 191, 36, 0.1); }
    .hero { text-align: center; padding: 60px 20px; }
    .console-output {
      max-height: 350px; overflow-y: auto;
      background: #0a0a0a; color: #00ff88;
      padding: 20px; font-family: 'Courier New', monospace;
      border-radius: 12px; font-size: 14px; border: 1px solid #374151;
    }
    .navbar {
      position: sticky; top: 0; z-index: 50;
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(15px);
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }
    body.dark .navbar { background: rgba(15, 23, 42, 0.98); border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
    .tab-selector { display: flex; justify-content: center; gap: 1rem; margin-bottom: 1.5rem; border-bottom: 2px solid #ddd; }
    body.dark .tab-selector { border-bottom-color: #444; }
    .tab-button { padding: 0.5rem 1.5rem; font-weight: 600; cursor: pointer; border-bottom: 3px solid transparent; transition: border-color 0.3s ease, color 0.3s ease; color: #555; }
    body.dark .tab-button { color: #aaa; }
    .tab-button.active { border-bottom-color: #3b82f6; color: #3b82f6; }
    body.dark .tab-button.active { color: #60a5fa; border-bottom-color: #60a5fa; }
    .toast { position: fixed; bottom: 20px; right: 20px; background: #10b981; color: white; padding: 12px 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); display: none; z-index: 1000; }
    .login-card {
      width: 400px;
      margin: 50px auto;
      padding: 30px;
    }
    .banned-message {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background-color: #ffc107;
      color: #000;
      text-align: center;
      padding: 10px;
      z-index: 9999;
    }
    .warn-message {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background-color: #ffc107;
      color: #000;
      text-align: center;
      padding: 10px;
      z-index: 9999;
      display: none; /* Initially hidden */
    }
    .muted {
      opacity: 0.5;
      pointer-events: none;
    }
  </style>
</head>
<body class="light">

  <div id="bannedMessage" class="banned-message hidden">Voc√™ foi banido e n√£o pode usar este sistema.</div>
  <div id="warnMessage" class="warn-message"></div>

  <div class="navbar">
    <div class="container">
      <div class="flex justify-between items-center py-4">
        <h1 class="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">Chat privado </h1>
        <button id="themeToggle" class="flex items-center px-4 py-2 rounded-full bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-700 to-gray-600 text-gray-800 dark:text-gray-200 hover:scale-105 transition">
          <span class="icon icon-moon mr-2"></span>Esc-md
        </button>
      </div>
    </div>
  </div>

  <div class="container">

    <!-- Login Section -->
    <div id="loginSection" class="card login-card">
      <h3 class="text-3xl font-semibold mb-6">Login</h3>
      <input type="text" id="usernameInput" class="w-full p-5 border-2 rounded-xl mb-6 bg-white dark:bg-gray-800" placeholder="Usu√°rio...">
      <button id="loginButton" class="bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-3 rounded-full">Entrar</button>
    </div>

    <nav id="mainNav" class="tab-selector hidden">
      <button class="tab-button active" aria-controls="sendSection">Enviar</button>
      <button class="tab-button" aria-controls="adminSection">Admin</button>
      <button class="tab-button" aria-controls="viewSection">Visualizar</button>
      <button class="tab-button" aria-controls="consoleSection">Console</button>
    </nav>

    <div class="hero hidden" id="mainHero">
      <h2 class="text-6xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-indigo-700 to-pink-500">üîê</h2>
      <p class="text-xl opacity-90">Feito por astyyy, uptade log em breve.</p>
    </div>

    <!-- Se√ß√µes -->
    <div id="sendSection" class="card p-8 mb-8 hidden">
      <h3 class="text-3xl font-semibold mb-6">Enviar Mensagem</h3>
      <textarea id="messageInput" class="w-full p-5 border-2 rounded-xl mb-6 bg-white dark:bg-gray-800"></textarea>
      <button id="sendButton" class="bg-gradient-to-r from-blue-500 to-blue-600 text-white px-8 py-3 rounded-full">Enviar Agora</button>
      <p id="muteTimer" class="text-sm text-red-500 font-semibold mt-4 hidden">Voc√™ foi mutado por <span id="muteTimeRemaining"></span>.</p>
    </div>

    <div id="adminSection" class="card p-8 mb-8 hidden">
      <h3 class="text-3xl font-semibold mb-6">Admin Tokens</h3>
      <input type="password" id="adminPassword" class="w-full p-5 border-2 rounded-xl mb-6 bg-white dark:bg-gray-800" placeholder="Senha...">
      <button id="generateTokenButton" class="bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-3 rounded-full">Gerar Token</button>
      <p id="newTokenDisplay" class="text-sm text-green-500 font-semibold mt-4 hidden"></p>

      <h3 class="text-3xl font-semibold mt-8 mb-6">Root Admin Login</h3>
      <input type="password" id="rootAdminPassword" class="w-full p-5 border-2 rounded-xl mb-6 bg-white dark:bg-gray-800" placeholder="Senha root...">
      <button id="rootLoginButton" class="bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-full">Entrar como Root</button>

      <div id="rootAdminControls" class="hidden mt-8">
        <h3 class="text-2xl font-semibold mb-6">Controles Root Admin</h3>
        <textarea id="rootMessageInput" class="w-full p-5 border-2 rounded-xl mb-6 bg-white dark:bg-gray-800" placeholder="Mensagem como sistema..."></textarea>
        <button id="sendRootMessageButton" class="bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-full">Enviar mensagem como Root</button>
      </div>
    </div>

    <div id="viewSection" class="card p-8 mb-8 hidden">
      <h3 class="text-3xl font-semibold mb-6">Visualizar Tudo</h3>
      <input type="text" id="tokenInput" class="w-full p-5 border-2 rounded-xl mb-6 bg-white dark:bg-gray-800" placeholder="Token...">
      <button id="viewButton" class="bg-gradient-to-r from-purple-500 to-purple-600 text-white px-8 py-3 rounded-full">Revelar Mensagens</button>
      <div id="messageList" class="space-y-4 hidden"></div>
      <p id="errorMessage" class="text-red-500 text-sm mt-4 hidden">‚ùå Token inv√°lido ou expirado.</p>
    </div>

    <div id="consoleSection" class="card p-8 mb-8 hidden">
      <h3 class="text-3xl font-semibold mb-6">Console Avan√ßado</h3>
      <input type="password" id="consolePassword" class="w-full p-5 border-2 rounded-xl mb-6 bg-white dark:bg-gray-800" placeholder="Senha console...">
      <button id="accessConsole" class="bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-full">Acessar</button>
      <div id="consolePanel" class="hidden mt-8">
        <textarea id="commandInput" class="w-full p-5 border-2 rounded-xl mb-6 bg-white dark:bg-gray-800" placeholder="Digite comando (HELP)" rows="3"></textarea>
        <button id="runCommand" class="bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-full">Executar</button>
        <div class="console-output mt-6" id="consoleOutput">‚úÖ Bem-vindo ao console. Digite HELP.</div>
      </div>
    </div>

    <div id="fixedMessagesCard" class="card p-8 mb-8 hidden">
      <h4 class="text-2xl font-bold mb-6">üí° Mensagens Fixadas</h4>
      <div id="fixedMessages" class="space-y-4"></div>
    </div>

    <div class="toast" id="toast"></div>
  </div>

  <script>
    // ========= Vari√°veis =========
    let messages = JSON.parse(localStorage.getItem("messages")) || [];
    let tokens = JSON.parse(localStorage.getItem("tokens")) || ["gymukZ"];
    const ADMIN_PASS = "admin123";
    const ROOT_ADMIN_PASS = "root123"; // Senha root admin
    const CONSOLE_PASS = "console123";
    let loggedInUser = localStorage.getItem("loggedInUser") || null;
    let loggedInUsers = JSON.parse(localStorage.getItem("loggedInUsers")) || [];
    let bannedUsers = JSON.parse(localStorage.getItem("bannedUsers")) || [];
    let mutedUsers = JSON.parse(localStorage.getItem("mutedUsers")) || {}; // { username: expirationTime }
    let isRootAdmin = false; // Flag para verificar se o usu√°rio est√° logado como root admin

    const COMMANDS = {
      HELP: "Mostra esta ajuda",
      LIST: "Lista todas as mensagens",
      TOKENS: "Mostra tokens ativos",
      CLEAR: "Limpa o console",
      FIXED: "Mostra mensagens fixadas",
      DEL: "Deleta mensagem por ID (DEL <id>)",
      FIX: "Fixa mensagem (FIX <id>)",
      UNFIX: "Desfixa mensagem (UNFIX <id>)",
      ADDMSG: "Adiciona nova mensagem (ADDMSG <texto>)",
      USERS: "Lista usu√°rios logados",
      BAN: "Bane um usu√°rio (BAN <username>)",
      WARN: "Envia um aviso para o usu√°rio (WARN <username> <motivo>)",
      MUTE: "Muta um usu√°rio (MUTE <username> <dias> <horas> <minutos> <segundos>)",
      "HELP COMMAND": "Mostra a ajuda de um comando espec√≠fico (HELP <comando>)"
    };

    const COMMAND_DESCRIPTIONS = {
      HELP: "Mostra a lista de comandos dispon√≠veis.",
      LIST: "Lista todas as mensagens armazenadas no sistema.",
      TOKENS: "Lista os tokens de acesso ativos.",
      CLEAR: "Limpa a sa√≠da do console.",
      FIXED: "Lista as mensagens que foram fixadas.",
      DEL: "Deleta uma mensagem espec√≠fica usando seu ID. Exemplo: DEL msg-1234567890",
      FIX: "Fixa uma mensagem espec√≠fica usando seu ID. Exemplo: FIX msg-1234567890",
      UNFIX: "Desfixa uma mensagem espec√≠fica usando seu ID. Exemplo: UNFIX msg-1234567890",
      ADDMSG: "Adiciona uma nova mensagem ao sistema. Exemplo: ADDMSG Ol√° mundo!",
      USERS: "Lista os usu√°rios que est√£o atualmente logados.",
      BAN: "Bane um usu√°rio, impedindo-o de acessar o sistema. Exemplo: BAN nomeDoUsuario",
      WARN: "Envia um aviso ao usu√°rio com um motivo espec√≠fico. Exemplo: WARN nomeDoUsuario Motivo do aviso",
      MUTE: "Muta um usu√°rio por um tempo espec√≠fico. Exemplo: MUTE nomeDoUsuario 0 1 30 0 (muta por 1 hora e 30 minutos)"
    };

    // ========= Login =========
    const loginSection = document.getElementById("loginSection");
    const mainNav = document.getElementById("mainNav");
    const mainHero = document.getElementById("mainHero");
    const sendButton = document.getElementById("sendButton");
    const sendSection = document.getElementById("sendSection");
    const muteTimer = document.getElementById("muteTimer");
    const muteTimeRemainingSpan = document.getElementById("muteTimeRemaining");
    const bannedMessage = document.getElementById("bannedMessage");

    function showMainApp() {
      loginSection.classList.add("hidden");
      mainNav.classList.remove("hidden");
      mainHero.classList.remove("hidden");
      document.getElementById("sendSection").classList.remove("hidden");
    }

    // Verificar se o usu√°rio est√° banido
    function checkBannedStatus() {
      if (bannedUsers.includes(loggedInUser)) {
        bannedMessage.classList.remove("hidden");
        mainNav.classList.add("hidden");
        mainHero.classList.add("hidden");
        sendSection.classList.add("hidden");
        loginSection.classList.remove("hidden");
        loggedInUser = null; // Limpar usu√°rio logado
        localStorage.removeItem("loggedInUser");
        localStorage.removeItem("loggedInUsers");
        return true; // Retorna true se o usu√°rio estiver banido
      }
      return false; // Retorna false se o usu√°rio n√£o estiver banido
    }

    if (loggedInUser) {
      if (checkBannedStatus()) {
        // Se o usu√°rio est√° banido, interrompe o processo de login
      } else {
        showMainApp();
      }
    }

    document.getElementById("loginButton").addEventListener("click", () => {
      const username = document.getElementById("usernameInput").value.trim();
      if (!username) return alert("Por favor, insira um nome de usu√°rio.");

      if (bannedUsers.includes(username)) {
        document.getElementById("bannedMessage").classList.remove("hidden");
        return;
      }

      loggedInUser = username;
      localStorage.setItem("loggedInUser", username);

      // Adicionar usu√°rio √† lista de usu√°rios logados
      if (!loggedInUsers.includes(username)) {
        loggedInUsers.push(username);
        localStorage.setItem("loggedInUsers", JSON.stringify(loggedInUsers));
      }

      showMainApp();
      updateMuteStatus(); // Inicializa o status de mute
    });

    // ========= Root Admin Login =========
    document.getElementById("rootLoginButton").addEventListener("click", () => {
      if (document.getElementById("rootAdminPassword").value === Asty) {
        isRootAdmin = true;
        document.getElementById("rootAdminControls").classList.remove("hidden");
        showToast("Logado como Root Admin!");
      } else {
        alert("‚ùå Senha incorreta!");
      }
    });

    // ========= Enviar Mensagem como Root =========
    document.getElementById("sendRootMessageButton").addEventListener("click", () => {
      const txt = document.getElementById("rootMessageInput").value.trim();
      if (!txt) return;
      const id = "root-" + Math.floor(Math.random() * 9999);
      messages.push({ id, text: txt, fixed: false, user: "Sistema" }); // Identifica como mensagem do sistema
      localStorage.setItem("messages", JSON.stringify(messages));
      document.getElementById("rootMessageInput").value = "";
      showToast("Mensagem enviada como Root!");
    });

    // ========= Tabs =========
    document.querySelectorAll(".tab-button").forEach(btn => {
      btn.addEventListener("click", () => {
        document.querySelectorAll(".tab-button").forEach(b => b.classList.remove("active"));
        document.querySelectorAll(".card").forEach(c => c.classList.add("hidden"));
        btn.classList.add("active");
        document.getElementById(btn.getAttribute("aria-controls")).classList.remove("hidden");
      });
    });

    // ========= Tema =========
    document.getElementById("themeToggle").addEventListener("click", () => {
      document.body.classList.toggle("dark");
      document.body.classList.toggle("light");
    });

    // ========= Toast =========
    function showToast(msg) {
      const toast = document.getElementById("toast");
      toast.textContent = msg;
      toast.style.display = "block";
      setTimeout(() => (toast.style.display = "none"), 2500);
    }

    // ========= Enviar =========
    function sendMessage() {
      const txt = document.getElementById("messageInput").value.trim();
      if (!txt) return;
      const id = `${loggedInUser}-${Math.floor(Math.random() * 9999)}`;
      messages.push({ id, text: txt, fixed: false, user: loggedInUser }); // Salva o usu√°rio
      localStorage.setItem("messages", JSON.stringify(messages));
      document.getElementById("messageInput").value = "";
      showToast("Mensagem enviada!");
    }

    document.getElementById("sendButton").addEventListener("click", () => {
      if (isMuted()) {
        return; // N√£o permite enviar mensagem se estiver mutado
      }
      sendMessage();
    });

    // ========= Admin =========
    document.getElementById("generateTokenButton").addEventListener("click", () => {
      if (document.getElementById("adminPassword").value !== ADMIN_PASS) return alert("‚ùå Senha incorreta!");
      const token = Math.random().toString(36).substring(2, 8);
      tokens.push(token);
      localStorage.setItem("tokens", JSON.stringify(tokens));
      const el = document.getElementById("newTokenDisplay");
      el.textContent = "Novo token: " + token;
      el.classList.remove("hidden");
      showToast("Token gerado!");
    });

    // ========= Visualizar =========
    document.getElementById("viewButton").addEventListener("click", () => {
      const token = document.getElementById("tokenInput").value;
      if (!tokens.includes(token)) return document.getElementById("errorMessage").classList.remove("hidden");
      document.getElementById("errorMessage").classList.add("hidden");
      const list = document.getElementById("messageList");
      list.innerHTML = "";
      messages.forEach(m => {
        const div = document.createElement("div");
        div.className = "message-item p-4 rounded-lg border bg-gray-50 dark:bg-gray-700";
        div.textContent = `[${m.id}] ${m.text} (Enviado por: ${m.user})` + (m.fixed ? " üìå" : ""); // Mostra o usu√°rio
        list.appendChild(div);
      });
      list.classList.remove("hidden");
    });

    // ========= Console =========
    document.getElementById("accessConsole").addEventListener("click", () => {
      if (document.getElementById("consolePassword").value !== CONSOLE_PASS) return alert("‚ùå Senha incorreta!");
      document.getElementById("consolePanel").classList.remove("hidden");
    });

    document.getElementById("runCommand").addEventListener("click", runConsoleCommand);

    function runConsoleCommand() {
      const cmd = document.getElementById("commandInput").value.trim();
      const output = document.getElementById("consoleOutput");
      const [command, ...args] = cmd.split(" ");
      const argText = args.join(" ");

      switch (command.toUpperCase()) {
        case "HELP":
          if (args.length > 0) {
            const commandToHelp = args[0].toUpperCase();
            if (COMMAND_DESCRIPTIONS[commandToHelp]) {
              output.innerHTML += `<br>üìñ Ajuda para o comando ${commandToHelp}:<br>${COMMAND_DESCRIPTIONS[commandToHelp]}`;
            } else {
              output.innerHTML += `<br>‚ö†Ô∏è Comando '${commandToHelp}' n√£o encontrado.`;
            }
          } else {
            output.innerHTML += "<br>üìñ Comandos dispon√≠veis:";
            Object.entries(COMMANDS).forEach(([c, d]) => output.innerHTML += `<br>${c} ‚Üí ${d}`);
          }
          break;
        case "LIST":
          output.innerHTML += messages.length ? "<br>" + messages.map(m => `[${m.id}] ${m.text} (Enviado por: ${m.user})${m.fixed ? " üìå" : ""}`).join("<br>") : "<br>Sem mensagens.";
          break;
        case "TOKENS":
          output.innerHTML += "<br>üîë Tokens: " + tokens.join(", ");
          break;
        case "CLEAR":
          output.innerHTML = "‚úÖ Console limpo.";
          break;
        case "FIXED":
          output.innerHTML += "<br>üìå Fixadas: " + messages.filter(m => m.fixed).map(m => `[${m.id}] ${m.text}`).join("<br>");
          break;
        case "DEL":
          if (!args[0]) return output.innerHTML += "<br>‚ö†Ô∏è Use: DEL <id>";
          messages = messages.filter(m => m.id !== args[0]);
          localStorage.setItem("messages", JSON.stringify(messages));
          output.innerHTML += "<br>üóëÔ∏è Deletado " + args[0];
          break;
        case "FIX":
          const f = messages.find(m => m.id === args[0]);
          if (f) { f.fixed = true; localStorage.setItem("messages", JSON.stringify(messages)); output.innerHTML += "<br>üìå Fixado " + args[0]; }
          break;
        case "UNFIX":
          const u = messages.find(m => m.id === args[0]);
          if (u) { u.fixed = false; localStorage.setItem("messages", JSON.stringify(messages)); output.innerHTML += "<br>üìå Desfixado " + args[0]; }
          break;
        case "ADDMSG":
          if (!argText) return output.innerHTML += "<br>‚ö†Ô∏è Use: ADDMSG <texto>";
          const id = "msg-" + Date.now();
          messages.push({ id, text: argText, fixed: false });
          localStorage.setItem("messages", JSON.stringify(messages));
          output.innerHTML += "<br>‚úÖ Mensagem adicionada " + id;
          break;
        case "USERS":
          output.innerHTML += "<br>üë§ Usu√°rios Logados: " + loggedInUsers.join(", ");
          break;
        case "BAN":
          if (!args[0]) return output.innerHTML += "<br>‚ö†Ô∏è Use: BAN <username>";
          const userToBan = args[0];
          if (!bannedUsers.includes(userToBan)) {
            bannedUsers.push(userToBan);
            localStorage.setItem("bannedUsers", JSON.stringify(bannedUsers));
            output.innerHTML += `<br>üö´ Usu√°rio ${userToBan} banido.`;
            if (userToBan === loggedInUser) {
                // Se o usu√°rio banido √© o mesmo que est√° logado, desloga e mostra a mensagem de banimento.
                loggedInUser = null;
                localStorage.removeItem("loggedInUser");
                localStorage.removeItem("loggedInUsers");
                showMainApp();  // Pode precisar ajustar isso para redirecionar para a p√°gina de login ou similar.
                bannedMessage.classList.remove("hidden");
            }
          } else {
            output.innerHTML += `<br>‚ö†Ô∏è Usu√°rio ${userToBan} j√° est√° banido.`;
          }
          break;
        case "WARN":
          if (args.length < 2) return output.innerHTML += "<br>‚ö†Ô∏è Use: WARN <username> <motivo>";
          const userToWarn = args[0];
          const warnReason = args.slice(1).join(" ");
          displayWarnMessage(userToWarn, warnReason);
          output.innerHTML += `<br>‚ö†Ô∏è Aviso enviado para ${userToWarn}: ${warnReason}`;
          break;
          case "MUTE":
            if (args.length < 6) return output.innerHTML += "<br>‚ö†Ô∏è Use: MUTE <username> <dias> <horas> <minutos> <segundos>";
            const userToMute = args[0];
            const days = parseInt(args[1]);
            const hours = parseInt(args[2]);
            const minutes = parseInt(args[3]);
            const seconds = parseInt(args[4]);
            const totalSeconds = days * 24 * 3600 + hours * 3600 + minutes * 60 + seconds;
            const muteExpirationTime = Date.now() + totalSeconds * 1000;

            mutedUsers[userToMute] = muteExpirationTime;
            localStorage.setItem("mutedUsers", JSON.stringify(mutedUsers));
            output.innerHTML += `<br>üîá Usu√°rio ${userToMute} mutado por ${days} dias, ${hours} horas, ${minutes} minutos e ${seconds} segundos.`;
            updateMuteStatus(); // Atualiza o estado de mute do usu√°rio imediatamente
            break;
        default:
          output.innerHTML += "<br>‚ùì Comando desconhecido. Use HELP.";
      }
    }

    // ========= Autocompletar =========
    const input = document.getElementById("commandInput");
    input.addEventListener("keydown", e => {
      if (e.key === "Tab") {
        e.preventDefault();
        const value = input.value.trim().toUpperCase();
        const match = Object.keys(COMMANDS).find(c => c.startsWith(value));
        if (match) input.value = match + " ";
      }
    });

    // ========= Warn Message =========
    function displayWarnMessage(username, reason) {
      const warnMessageDiv = document.getElementById("warnMessage");
      warnMessageDiv.textContent = `Aviso para ${username}: ${reason}`;
      warnMessageDiv.style.display = "block";
      setTimeout(() => {
        warnMessageDiv.style.display = "none";
      }, 5000); // Exibe a mensagem por 5 segundos
    }

    // ========= Mute Functionality =========
    function isMuted() {
      if (!loggedInUser || !mutedUsers[loggedInUser]) return false;

      const expirationTime = mutedUsers[loggedInUser];
      return Date.now() < expirationTime;
    }

    function updateMuteStatus() {
      if (isMuted()) {
        sendButton.disabled = true;
        sendSection.classList.add("muted");
        muteTimer.classList.remove("hidden");
        updateMuteTimer();
      } else {
        sendButton.disabled = false;
        sendSection.classList.remove("muted");
        muteTimer.classList.add("hidden");
        sendButton.textContent = "Enviar Agora";
      }
    }

    function updateMuteTimer() {
      if (!loggedInUser || !mutedUsers[loggedInUser]) return;

      const expirationTime = mutedUsers[loggedInUser];
      const timeLeft = expirationTime - Date.now();

      if (timeLeft > 0) {
        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

        const timeString = `${days}d ${hours}h ${minutes}m ${seconds}s`;
        muteTimeRemainingSpan.textContent = timeString;
        sendButton.textContent = `Voc√™ foi mutado por ${timeString}`;

        setTimeout(updateMuteTimer, 1000);
      } else {
        // Remove o usu√°rio da lista de mutados quando o tempo acabar
        delete mutedUsers[loggedInUser];
        localStorage.setItem("mutedUsers", JSON.stringify(mutedUsers));
        updateMuteStatus(); // Atualiza o estado de mute
      }
    }

    // Chama a fun√ß√£o de atualiza√ß√£o de mute quando a p√°gina carrega
    if (loggedInUser) {
      updateMuteStatus();
    }

    // Verificar o estado de banimento ao carregar a p√°gina
    window.onload = function() {
        if (loggedInUser) {
            checkBannedStatus();
        }
    };

  </script>
</body>
</html>